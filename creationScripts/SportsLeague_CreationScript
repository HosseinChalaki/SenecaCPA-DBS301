-- ---------------------------------
/* 	Sportleagues Database Creation Script
	for PostgreSQL installation using pgAdmin4
	
	This is to be used for demonstration purposes only.
	*/


SET FEEDBACK 1
SET NUMWIDTH 10
SET LINESIZE 80

SET PAGESIZE 100
SET ECHO OFF

Prompt ******  Dropping existing tables (IF THEY ARE THERE) ....

DROP TABLE tbldatplayers;
DROP TABLE tbldatteams;
DROP TABLE tbljncrosters;
DROP TABLE tbljncteamsdivs;
DROP TABLE tbllistdivisions;
DROP TABLE tbldatgames;
DROP TABLE tbldatgoalscorers;

Prompt ******  Creating PLAYERS table ....

-- Create players TABLE
CREATE TABLE tbldatplayers
(
    playerid integer NOT NULL,
    regnumber varchar2(15),
    namelast varchar2(25),
    namefirst varchar2(25),
    isactive integer,
    CONSTRAINT tbldatplayers_pkey PRIMARY KEY (playerid)
);

-- Insert player Records
Prompt ******  Inserting PLAYERS Records table ....
SET ECHO OFF
INSERT INTO tbldatplayers VALUES (1302,30803,'Kelly','Brian', 1);
-- Original script inserts almost 600 more players.

COMMIT;
-- Create teams TABLE
Prompt ******  Creating TEAMS  table ....
CREATE TABLE tbldatteams
(
    teamid integer NOT NULL,
    teamnameshort varchar(10) NOT NULL,
    teamnamelong varchar(25) NOT NULL,
    isactive integer,
    uniformcolour varchar(10),
    CONSTRAINT tbldatteams_pkey PRIMARY KEY (teamid)
);

-- INSERT team records
Prompt ******  Inserting TEAMS Records table ....
INSERT INTO tbldatteams VALUES (210,'G Rangers','Guelph Rangers',1,'Green');
-- Original script inserts a little over 10 more teams.

COMMIT;

-- CREATE Divisions TABLE
Prompt ******  Creating DIVISIONS table ....
CREATE TABLE tbllistdivisions
(
    divid integer NOT NULL,
    divnameshort varchar(3) NOT NULL,
    divnamelong varchar(20) NOT NULL,
    isactive integer DEFAULT 1,
    isdefault integer DEFAULT 0,
    displayorder integer DEFAULT 10,
    CONSTRAINT tbllistdivisions_pkey PRIMARY KEY (divid)
);

-- INSERT division records
Prompt ******  Inserting DIVISIONS Records table ....
INSERT INTO tbllistdivisions VALUES (28,'1st','Premier Division',1,1, 10);
INSERT INTO tbllistdivisions VALUES (30,'PO','playoffs',1,0, 30);
INSERT INTO tbllistdivisions VALUES (31,'CUP','SL Cup Tournament',1,0, 20);
COMMIT;

Prompt ******  Creating Teams/Divisions Junction table ....
-- CREATE tbljncteamsdivs table
CREATE TABLE tbljncteamsdivs
(
    linkid integer GENERATED BY DEFAULT ON NULL AS IDENTITY,
    teamid integer NOT NULL,
    divid integer NOT NULL,
    clinchedpo integer DEFAULT 0,
    CONSTRAINT tbljncteamsdivs_pkey PRIMARY KEY (linkid)
);

-- INSERT tbljncteamsdivs records
Prompt ******  Inserting Teams/Divisions Junction Records table ....
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (215,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (223,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (214,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (212,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (221,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (218,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (210,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (216,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (211,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (220,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (225,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (222,28,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (212,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (222,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (223,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (211,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (216,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (210,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (218,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (220,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (214,31,1);
INSERT INTO tbljncteamsdivs (teamid,divid,clinchedpo) VALUES (215,31,1);
COMMIT;

-- CREATE tbljncrosters table
Prompt ******  Creating Rosters Junction table ....

CREATE TABLE tbljncrosters
(
    rosterid integer GENERATED BY DEFAULT ON NULL AS IDENTITY,
    playerid integer NOT NULL,
    teamid integer NOT NULL,
    isactive integer DEFAULT 1,
    jerseynumber integer DEFAULT 0,
    CONSTRAINT tbljncrosters_pkey PRIMARY KEY (rosterid)
);

-- INSERT records tbljncrosters
Prompt ******  Inserting Rosters Junction Records table ....

INSERT INTO tbljncrosters (playerid, teamid, isactive, jerseynumber)VALUES (963874,212,1,66);
INSERT INTO tbljncrosters (playerid, teamid, isactive, jerseynumber)VALUES (1000894,221,1,58);
-- Original script inserts a little over 200 rows.

COMMIT;

-- Create tbldatgames table
Prompt ******  Creating GAMES table ....

CREATE TABLE tbldatgames
(
    gameid integer GENERATED BY DEFAULT ON NULL AS IDENTITY,
    divid integer NOT NULL,
    gamenum integer,
    gamedatetime date,
    hometeam integer NOT NULL,
    homescore integer DEFAULT 0,
    visitteam integer NOT NULL,
    visitscore integer DEFAULT 0,
    locationid integer,
    isplayed integer DEFAULT 0,
    notes varchar(50),
    CONSTRAINT tbldatgames_pkey PRIMARY KEY (gameid));

-- INSERT tbldatgames records
Prompt ******  Inserting GAMES Records table ....

INSERT INTO tbldatgames (divid,gamenum,gamedatetime,hometeam,homescore,visitteam,visitscore,locationid,isplayed,notes) VALUES (28,1,to_date('170523','yymmdd'),218,1,212,3,84,1,'');
INSERT INTO tbldatgames (divid,gamenum,gamedatetime,hometeam,homescore,visitteam,visitscore,locationid,isplayed,notes) VALUES (28,2,to_date('170523','yymmdd'),214,3,222,2,80,1,'');
-- Original script inserts about another 100 rows.
					     
COMMIT;

-- CREATE tbldatgoalscorers table
Prompt ******  Inserting Goal Scorers Records table ....

CREATE TABLE tbldatgoalscorers
(
    goalid integer GENERATED BY DEFAULT ON NULL AS IDENTITY,
    gameid integer NOT NULL,
    playerid integer NOT NULL,
    teamid integer NOT NULL,
    numgoals integer DEFAULT 0,
    numassists integer DEFAULT 0,
    CONSTRAINT tbldatgoalscorers_pkey PRIMARY KEY (goalid) );

-- INSERT tbldatgoalscorers records
Prompt ******  Inserting Goal Scorers Records table ....

INSERT INTO tbldatgoalscorers (gameid,playerid,teamid,numgoals,numassists) VALUES (1,2025114,212,1,0);
-- Original script inserts about another 250 rows.
					     
COMMIT;

Prompt ******  END OF CREATION SCRIPT ....
